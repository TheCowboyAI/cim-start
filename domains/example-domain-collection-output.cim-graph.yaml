# Copyright 2025 - Cowboy AI, LLC
# Example CIM Graph Output from Domain Collection Agent
# This file demonstrates the structure and format of cim-graph files
# generated by the Interactive Domain Collection Agent

cim_graph:
  format_version: "1.0.0"
  graph_id: "example-graph-550e8400-e29b-41d4-a716-446655440000"
  generated_at: "2025-01-15T10:30:45Z"
  generated_by: "user-domain-collection-001"
  session_id: "session-20250115-103045-abc123"
  
  # Domain Entity Definition
  # The foundational entity that establishes a Domain of Reasoning
  domain:
    entity_type: "Domain"
    entity_id: "e-commerce-platform"
    created_at: "2025-01-15T10:30:45Z"
    
    # Required Components (CIM Invariants)
    # Every Domain must have these two components
    components:
      name:
        component_type: "DomainName"
        component_id: "e-commerce-platform-name"
        data_type: "string"
        value: "e-commerce-platform"
        required: true
        validated_at: "2025-01-15T10:30:45Z"
        constraints_satisfied:
          - "unique_within_cim"
          - "valid_identifier_format"
          - "appropriate_length"
        validation_rules:
          - "3-50 characters"
          - "lowercase letters, numbers, hyphens only"
          - "no consecutive hyphens"
          - "unique across all domains"
      
      purpose:
        component_type: "DomainPurpose"
        component_id: "e-commerce-platform-purpose"
        data_type: "string"
        value: |
          Manages the complete e-commerce lifecycle including customer management,
          product catalog, order processing, inventory allocation, and fulfillment
          coordination. Provides integration points for payment processing, shipping
          services, and customer communication systems.
        required: true
        validated_at: "2025-01-15T10:30:45Z"
        constraints_satisfied:
          - "meaningful_description"
          - "appropriate_length"
          - "clarity_validated"
        validation_rules:
          - "10-500 characters"
          - "meaningful descriptive content"
          - "clear domain boundaries"
    
    # Domain Relationships
    # How this domain relates to other CIM entities
    relationships:
      - relationship_type: "establishes"
        relationship_id: "e-commerce-platform-establishes-reasoning"
        target_entity: "DomainOfReasoning"
        target_id: "e-commerce-platform-reasoning-boundary"
        cardinality: "one-to-one"
        established_at: "2025-01-15T10:30:45Z"
        description: "This domain establishes a boundary for contextual reasoning about e-commerce operations"
        properties:
          boundary_type: "business_capability"
          reasoning_scope: "e-commerce_lifecycle"
      
      - relationship_type: "manages"
        relationship_id: "e-commerce-platform-manages-events"
        target_entity: "EventStream"
        target_id: "DOMAIN_E_COMMERCE_PLATFORM_EVENTS"
        cardinality: "one-to-many"
        established_at: "2025-01-15T10:30:45Z"
        description: "This domain manages its event stream for state persistence and event sourcing"
        properties:
          stream_name: "DOMAIN_E_COMMERCE_PLATFORM_EVENTS"
          storage_type: "file"
          retention_policy: "30d"
          
      - relationship_type: "manages"
        relationship_id: "e-commerce-platform-manages-commands"
        target_entity: "CommandStream"
        target_id: "DOMAIN_E_COMMERCE_PLATFORM_COMMANDS"
        cardinality: "one-to-many"
        established_at: "2025-01-15T10:30:45Z"
        description: "This domain manages its command stream for action processing"
        properties:
          stream_name: "DOMAIN_E_COMMERCE_PLATFORM_COMMANDS"
          storage_type: "memory"
          retention_policy: "1h"
      
      - relationship_type: "contains"
        relationship_id: "e-commerce-platform-contains-contexts"
        target_entity: "BoundedContext"
        target_id: "e-commerce-platform-contexts"
        cardinality: "one-to-many"
        established_at: "2025-01-15T10:30:45Z"
        description: "This domain may contain multiple bounded contexts for organizing business logic"
        properties:
          context_pattern: "sub-domains within e-commerce"
          examples: ["sales", "inventory", "fulfillment", "catalog"]
    
    # Domain Metadata
    metadata:
      collection_method: "interactive_agent"
      collection_agent_version: "1.0.0"
      validation_passed: true
      cim_compliant: true
      ready_for_implementation: true
      domain_complexity: "medium"
      estimated_bounded_contexts: 4
      
    # CIM Integration Information
    # How this domain integrates with the CIM-Start infrastructure
    cim_integration:
      environment: "dev"
      
      # NATS JetStream Configuration
      nats_streams:
        events: "DOMAIN_E_COMMERCE_PLATFORM_EVENTS"
        commands: "DOMAIN_E_COMMERCE_PLATFORM_COMMANDS"
        snapshots: "DOMAIN_E_COMMERCE_PLATFORM_SNAPSHOTS"
      
      # Event Subject Patterns
      event_subjects:
        domain_pattern: "dev.domain.e-commerce-platform.>"
        command_pattern: "dev.command.e-commerce-platform.>"
        snapshot_pattern: "dev.snapshot.e-commerce-platform.>"
        projection_pattern: "dev.projection.e-commerce-platform.>"
      
      # File System Integration
      file_locations:
        domain_definition: "domains/e-commerce-platform/domain-definition.yaml"
        cim_graph: "domains/e-commerce-platform/domain.cim-graph.yaml"
        
  # Graph Validation Results
  validation:
    # CIM Invariants Validation
    cim_invariants_checked:
      - invariant: "domain_has_name"
        satisfied: true
        checked_at: "2025-01-15T10:30:45Z"
        
      - invariant: "domain_has_purpose" 
        satisfied: true
        checked_at: "2025-01-15T10:30:45Z"
        
      - invariant: "name_is_valid_format"
        satisfied: true
        checked_at: "2025-01-15T10:30:45Z"
        details: "Follows kebab-case convention with valid characters"
        
      - invariant: "purpose_is_meaningful"
        satisfied: true
        checked_at: "2025-01-15T10:30:45Z"
        details: "Provides clear description of domain scope and boundaries"
        
      - invariant: "domain_is_unique"
        satisfied: true
        checked_at: "2025-01-15T10:30:45Z"
        details: "No existing domain with this name found"
    
    # Overall Validation Status
    validation_timestamp: "2025-01-15T10:30:45Z"
    validation_agent: "user-domain-collection-001"
    validation_passed: true
    validation_score: 100
    
  # Graph Statistics and Metrics
  statistics:
    total_entities: 1
    total_components: 2
    total_relationships: 4
    complexity_score: "medium"
    completeness_score: "foundational"
    
    # Component Statistics
    required_components_present: 2
    optional_components_present: 0
    missing_components: 0
    
    # Relationship Statistics
    incoming_relationships: 0
    outgoing_relationships: 4
    bidirectional_relationships: 0
    
  # Extension Points for Future Development
  # These sections can be populated as the domain evolves
  future_extensions:
    potential_aggregates:
      - "Customer"
      - "Product"
      - "Order"
      - "Inventory"
      
    potential_bounded_contexts:
      - "Sales"
      - "Catalog"
      - "Inventory"
      - "Fulfillment"
      
    potential_external_integrations:
      - "payment-gateway"
      - "shipping-provider"
      - "email-service"
      
    recommended_next_steps:
      - "Define domain events through event storming"
      - "Identify key aggregates and their boundaries"
      - "Map external system integration points"
      - "Design command and query patterns"
      
# CIM Graph Format Documentation
# 
# This cim-graph format represents the structured knowledge about a Domain
# as collected by the Interactive Domain Collection Agent. The format includes:
#
# 1. Domain Entity: The core domain with its required components
# 2. Components: Name and Purpose (CIM invariants)
# 3. Relationships: How the domain relates to other CIM entities
# 4. Integration: NATS streams, file locations, subject patterns
# 5. Validation: Proof that CIM invariants are satisfied
# 6. Statistics: Metrics about the graph complexity
# 7. Extensions: Future development guidance
#
# This structured approach ensures that domains are properly established
# with clear boundaries and can be systematically developed using CIM modules.